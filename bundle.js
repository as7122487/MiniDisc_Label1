!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),s=i(2);i(5);var r=document.querySelector("#minidisc"),a={artist:"glass beach",album:"the first glass beach album",year:"2019",artURL:n},o=new s.MinidiscLabeler(r,{width:36,height:51,ppm:11.811,fontSize:1.76,lineHeight:2.12,headerHeight:5},a);o.draw();var h=document.querySelector("#artist-name"),p=document.querySelector("#album-name"),c=document.querySelector("#year");function l(t){switch(t.target.id){case"artist-name":o.setArtist(t.target.value);break;case"album-name":o.setAlbum(t.target.value);break;case"year":o.setYear(t.target.value)}}h.addEventListener("input",l),p.addEventListener("input",l),c.addEventListener("input",l),document.querySelector("#art-picker").addEventListener("change",(function(t){var e=new FileReader;e.onload=function(){o.setAlbumArt(e.result)},e.readAsDataURL(t.target.files[0])})),document.querySelector("#download-link").addEventListener("click",(function(t){t.target.download=o.meta.album+"-label.png",t.target.href=o.getDataURL()})),document.querySelector("#redraw").addEventListener("click",o.draw.bind(o))},function(t,e,i){t.exports=i.p+"b475db421a030873910d616567bfe0ed.jpg"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),s=i(4),r=function(){function t(t,e,i){this.canvas=t,this.ctx=t.getContext("2d"),this.settings=e,this.meta=i,this.setupDrawing()}return t.prototype.draw=function(){this.initCanvas(),this.drawArrow(),this.drawInsertText(),this.drawAlbumArt(),this.drawMDLogo(),this.drawMeta()},t.prototype.initCanvas=function(){this.ctx.fillStyle="#231F20",this.ctx.fillRect(0,0,this.settings.width*this.settings.ppm,this.settings.height*this.settings.ppm)},t.prototype.setupDrawing=function(){this.canvas.height=this.settings.height*this.settings.ppm,this.canvas.width=this.settings.width*this.settings.ppm},t.prototype.calculateCentering=function(t,e,i){return void 0===i&&(i=0),(t-e)/2+i},t.prototype.drawArrow=function(){var t=this.calculateCentering(this.settings.headerHeight*this.settings.ppm,1.2593*this.settings.ppm,0);this.ctx.fillStyle="white",this.ctx.beginPath(),this.ctx.moveTo(3.25*this.settings.ppm,t),this.ctx.lineTo(4.5*this.settings.ppm,t+1.2593*this.settings.ppm),this.ctx.lineTo(2*this.settings.ppm,t+1.2593*this.settings.ppm),this.ctx.fill()},t.prototype.drawInsertText=function(){this.ctx.font="bold "+this.settings.fontSize*this.settings.ppm+"px futura-pt-bold",this.ctx.fillStyle="white";var t=this.calculateCentering(this.settings.headerHeight*this.settings.ppm,this.settings.lineHeight*this.settings.ppm,0);this.ctx.fillText("INSERT THIS END",5.5*this.settings.ppm,Math.round(t+this.settings.fontSize*this.settings.ppm))},t.prototype.drawAlbumArt=function(){var t=this,e=new Image;e.crossOrigin="anonymous",e.addEventListener("load",(function(){t.ctx.fillStyle="#231F20",t.ctx.fillRect(0,5*t.settings.ppm,t.settings.width*t.settings.ppm,t.settings.width*t.settings.ppm);var i=e.width,n=t.settings.width*t.settings.ppm/i,s=e.height*n;t.ctx.drawImage(e,0,t.calculateCentering(t.settings.width*t.settings.ppm,s,t.settings.headerHeight*t.settings.ppm),t.settings.width*t.settings.ppm,s)}),!1),e.src=this.meta.artURL},t.prototype.drawMDLogo=function(){var t=this,e=new Image;e.crossOrigin="anonymous",e.addEventListener("load",(function(){var i=e.width,n=3.688*t.settings.ppm/i,s=e.height*n;t.ctx.drawImage(e,t.settings.width*t.settings.ppm-2*t.settings.ppm-3.688*t.settings.ppm,t.calculateCentering(t.settings.headerHeight*t.settings.ppm,s,0),3.688*t.settings.ppm,s)}),!1),e.src=s},t.prototype.drawMeta=function(){this.ctx.fillStyle="#231F20",this.ctx.fillRect(0,41*this.settings.ppm,this.settings.width*this.settings.ppm,10*this.settings.ppm),this.ctx.font="bold "+this.settings.fontSize*this.settings.ppm+"px futura-pt-bold",this.ctx.fillStyle="white";var t,e=(this.settings.lineHeight+this.settings.lineHeight+this.settings.fontSize)*this.settings.ppm;t=this.calculateCentering(10*this.settings.ppm,e,41*this.settings.ppm),console.log(t),this.ctx.fillText(this.meta.album.toUpperCase(),2*this.settings.ppm,Math.round(t+this.settings.fontSize*this.settings.ppm)),this.ctx.fillText(this.meta.artist.toUpperCase(),2*this.settings.ppm,Math.round(t+this.settings.lineHeight*this.settings.ppm+this.settings.fontSize*this.settings.ppm)),this.ctx.fillText(this.meta.year.toUpperCase(),2*this.settings.ppm,Math.round(t+this.settings.lineHeight*this.settings.ppm+this.settings.lineHeight*this.settings.ppm+this.settings.fontSize*this.settings.ppm))},t.prototype.setArtist=function(t){this.meta.artist=t,this.drawMeta()},t.prototype.setAlbum=function(t){this.meta.album=t,this.drawMeta()},t.prototype.setYear=function(t){this.meta.year=t,this.drawMeta()},t.prototype.setAlbumArt=function(t){this.meta.artURL=t,this.drawAlbumArt()},t.prototype.getDataURL=function(){var t=this.canvas.toDataURL("image/png");return t=n.changeDpiDataUrl(t,300)},t}();e.MinidiscLabeler=r},function(t,e,i){"use strict";function n(t){var e=-1;s||(s=function(){for(var t=new Int32Array(256),e=0;e<256;e++){for(var i=e,n=0;n<8;n++)i=1&i?3988292384^i>>>1:i>>>1;t[e]=i}return t}());for(var i=0;i<t.length;i++)e=s[255&(e^t[i])]^e>>>8;return-1^e}Object.defineProperty(e,"__esModule",{value:!0}),e.changeDpiBlob=function(t,e){var i=t.slice(0,33);return new Promise((function(n,s){var r=new FileReader;r.onload=function(){var i=new Uint8Array(r.result),s=t.slice(33),a=l(i,e,t.type);n(new Blob([a,s],{type:t.type}))},r.readAsArrayBuffer(i)}))},e.changeDpiDataUrl=function(t,e){var i=t.split(","),n=i[0],s=i[1],o=void 0,h=void 0,p=!1;if(-1!==n.indexOf(r)){o=r;var c=function(t){var e=t.indexOf("AAlwSFlz");-1===e&&(e=t.indexOf("AAAJcEhZ"));-1===e&&(e=t.indexOf("AAAACXBI"));return e}(s);c>=0?(h=4*Math.ceil((c+28)/3),p=!0):h=44}-1!==n.indexOf(a)&&(o=a,h=24);for(var u=s.substring(0,h),g=s.substring(h),d=atob(u),f=new Uint8Array(d.length),m=0;m<f.length;m++)f[m]=d.charCodeAt(m);var v=l(f,e,o,p),y=btoa(String.fromCharCode.apply(String,function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(v)));return[n,",",y,g].join("")};var s=void 0,r="image/png",a="image/jpeg",o="p".charCodeAt(0),h="H".charCodeAt(0),p="Y".charCodeAt(0),c="s".charCodeAt(0);function l(t,e,i,s){if(i===a)return t[13]=1,t[14]=e>>8,t[15]=255&e,t[16]=e>>8,t[17]=255&e,t;if(i===r){var l=new Uint8Array(13);e*=39.3701,l[0]=o,l[1]=h,l[2]=p,l[3]=c,l[4]=e>>>24,l[5]=e>>>16,l[6]=e>>>8,l[7]=255&e,l[8]=l[4],l[9]=l[5],l[10]=l[6],l[11]=l[7],l[12]=1;var u=n(l),g=new Uint8Array(4);if(g[0]=u>>>24,g[1]=u>>>16,g[2]=u>>>8,g[3]=255&u,s){var d=function(t){for(var e=t.length-1;e>=4;e--)if(9===t[e-4]&&t[e-3]===o&&t[e-2]===h&&t[e-1]===p&&t[e]===c)return e-3}(t);return t.set(l,d),t.set(g,d+13),t}var f=new Uint8Array(4);f[0]=0,f[1]=0,f[2]=0,f[3]=9;var m=new Uint8Array(54);return m.set(t,0),m.set(f,33),m.set(l,37),m.set(g,50),m}}},function(t,e,i){t.exports=i.p+"90fde477b813f0364dfb637c54dd6a24.svg"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"index.html"}]);